echo "ðŸ›  ÐÐ¾Ð²Ð°Ñ Ð²Ñ‹Ð³Ñ€ÑƒÐ·ÐºÐ° Ð² 1C_Up" > message.txt
echo "ÐÐ²Ñ‚Ð¾Ñ€: ${{ github.actor }}" >> message.txt
echo "ÐšÐ¾Ð¼Ð¼Ð¸Ñ‚: ${{ github.event.head_commit.message }}" >> message.txt
echo "Ð¡ÑÑ‹Ð»ÐºÐ°: https://github.com/${{ github.repository }}/commit/${{ github.sha }}" >> message.txtname: Notify Telegram on Push

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Extract commit info
        run: |
          TEXT="ðŸ›  ÐÐ¾Ð²Ð°Ñ Ð²Ñ‹Ð³Ñ€ÑƒÐ·ÐºÐ° Ð² 1C_Up\n"
          TEXT+="ÐÐ²Ñ‚Ð¾Ñ€: ${{ github.actor }}\n"
          TEXT+="ÐšÐ¾Ð¼Ð¼Ð¸Ñ‚: ${{ github.event.head_commit.message }}\n"
          TEXT+="Ð¡ÑÑ‹Ð»ÐºÐ°: https://github.com/${{ github.repository }}/commit/${{ github.sha }}"
          echo "$TEXT" > message.txt

      - name: Send to Telegram
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
        run: |
          CHAT_ID="1210917225"
          curl -s -X POST https://api.telegram.org/bot$TELEGRAM_TOKEN/sendMessage \
            -d chat_id="$CHAT_ID" \
            -d text="$(cat message.txt)"
